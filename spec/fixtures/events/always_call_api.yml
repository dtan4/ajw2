event:
  trigger:
    id: event01
    target: submitBtn
    type: onClick
    realtime: false
    params:
    - id: address
      type: string
      value:
        element: addressTextBox
        func: getValue
        type: element
    - id: sensor
      type: boolean
      value:
        value: 'false'
        type: literal
  action:
    type: always
    interfaces:
    - id: if01
      element: addressLabel
      func: setValue
      type: element
      value:
        type: call
        id: call01
        jsonpath: /results[0]/formatted_address
    databases: []
    call:
    - id: call01
      type: url
      method: get
      endpoint: http://maps.googleapis.com/maps/api/geocode/json
      params:
      - field: address
        value:
          type: param
          id: address
      - field: sensor
        value:
          type: param
          id: sensor
ruby: |
  post "/event01" do
    content_type :json
    response = { _db_errors: [] }
    address = params[:address]
    sensor = false
    call01 = http_get(
      "http://maps.googleapis.com/maps/api/geocode/json",
      address: address, sensor: sensor
    )
    if response[:_db_errors].length == 0
      response[:if01] = call01[:results][0][:formatted_address]
    end
    response.to_json
  end
